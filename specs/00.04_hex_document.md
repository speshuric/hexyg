
---

---

### Пример задачи для LLM (по этому пункту)

> **Context:** Мы разрабатываем hex-редактор на Rust. Нам нужна структура данных для хранения содержимого файла в памяти. Файл может быть разреженным (иметь адреса 0x100-0x200, а затем 0x4000-0x4010).
>
> **Task:** Напиши реализацию структуры `HexDocument`.
> 1. Используй `BTreeMap<u64, Vec<u8>>` для хранения данных.
> 2. Реализуй метод `set_byte(addr: u64, val: u8)`. Если запись идет в конец существующего блока — расширь его. Если в начало — тоже. Если между блоками есть разрыв в 1 байт, который мы заполняем — объедини блоки.
> 3. Реализуй generic метод `read_type<T>(&self, addr: u64, endian: Endianness) -> Option<T>` (где T: FromBytes).